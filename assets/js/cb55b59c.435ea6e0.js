"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[8289],{3905:(e,n,t)=>{t.d(n,{Zo:()=>s,kt:()=>m});var r=t(7294);function l(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function o(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?o(Object(t),!0).forEach((function(n){l(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,l=function(e,n){if(null==e)return{};var t,r,l={},o=Object.keys(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||(l[t]=e[t]);return l}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)t=o[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(l[t]=e[t])}return l}var p=r.createContext({}),i=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},s=function(e){var n=i(e.components);return r.createElement(p.Provider,{value:n},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},g=r.forwardRef((function(e,n){var t=e.components,l=e.mdxType,o=e.originalType,p=e.parentName,s=c(e,["components","mdxType","originalType","parentName"]),u=i(t),g=l,m=u["".concat(p,".").concat(g)]||u[g]||d[g]||o;return t?r.createElement(m,a(a({ref:n},s),{},{components:t})):r.createElement(m,a({ref:n},s))}));function m(e,n){var t=arguments,l=n&&n.mdxType;if("string"==typeof e||l){var o=t.length,a=new Array(o);a[0]=g;var c={};for(var p in n)hasOwnProperty.call(n,p)&&(c[p]=n[p]);c.originalType=e,c[u]="string"==typeof e?e:l,a[1]=c;for(var i=2;i<o;i++)a[i]=t[i];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}g.displayName="MDXCreateElement"},4998:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>a,default:()=>u,frontMatter:()=>o,metadata:()=>c,toc:()=>i});var r=t(7462),l=(t(7294),t(3905));const o={sidebar_position:4,id:"Electron\uff1a\u4e3b\u8fdb\u7a0b\u3001\u6e32\u67d3\u8fdb\u7a0b\u4ee5\u53ca\u901a\u4fe1",title:"Electron\uff1a\u4e3b\u8fdb\u7a0b\u3001\u6e32\u67d3\u8fdb\u7a0b\u4ee5\u53ca\u901a\u4fe1",authors:"duxinyues",tags:["Electron"]},a=void 0,c={permalink:"/blog/electron/Electron202204",editUrl:"https://github.com/duxinyues/blog/blob/main/blog/electron/Electron202204.md",source:"@site/blog/electron/Electron202204.md",title:"Electron\uff1a\u4e3b\u8fdb\u7a0b\u3001\u6e32\u67d3\u8fdb\u7a0b\u4ee5\u53ca\u901a\u4fe1",description:"Electron\u5e94\u7528\u7a0b\u5e8f\u533a\u5206\u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u3002",date:"2023-02-08T08:38:11.000Z",formattedDate:"2023\u5e742\u67088\u65e5",tags:[{label:"Electron",permalink:"/blog/tags/electron"}],readingTime:14.71,hasTruncateMarker:!1,authors:[{name:"\u8bfb\u5fc3\u60a6",title:"\u524d\u7aef\u5f00\u53d1\u653b\u57ce\u72ee",url:"https://github.com/duxinyues/",email:"yongyuan253015@gmail.com",imageURL:"https://avatars.githubusercontent.com/u/29058884?v=4",key:"duxinyues"}],frontMatter:{sidebar_position:4,id:"Electron\uff1a\u4e3b\u8fdb\u7a0b\u3001\u6e32\u67d3\u8fdb\u7a0b\u4ee5\u53ca\u901a\u4fe1",title:"Electron\uff1a\u4e3b\u8fdb\u7a0b\u3001\u6e32\u67d3\u8fdb\u7a0b\u4ee5\u53ca\u901a\u4fe1",authors:"duxinyues",tags:["Electron"]},prevItem:{title:"Electron\uff1aBrowserView\u4f7f\u7528\u65b9\u6cd5",permalink:"/blog/electron/Electron202203"},nextItem:{title:"Electron\uff1a\u83dc\u5355",permalink:"/blog/electron/Electron202205"}},p={authorsImageUrls:[void 0]},i=[{value:"\u4e3b\u8fdb\u7a0b",id:"\u4e3b\u8fdb\u7a0b",level:4},{value:"\u6e32\u67d3\u8fdb\u7a0b",id:"\u6e32\u67d3\u8fdb\u7a0b",level:4},{value:"\u8fdb\u7a0b\u901a\u4fe1",id:"\u8fdb\u7a0b\u901a\u4fe1",level:2},{value:"\u6e32\u67d3\u8fdb\u7a0b\u8bbf\u95ee\u4e3b\u8fdb\u7a0b",id:"\u6e32\u67d3\u8fdb\u7a0b\u8bbf\u95ee\u4e3b\u8fdb\u7a0b",level:4},{value:"\u4e3b\u8fdb\u7a0b\u8bbf\u95ee\u6e32\u67d3\u8fdb\u7a0b",id:"\u4e3b\u8fdb\u7a0b\u8bbf\u95ee\u6e32\u67d3\u8fdb\u7a0b",level:4}],s={toc:i};function u(e){let{components:n,...t}=e;return(0,l.kt)("wrapper",(0,r.Z)({},s,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("p",null,"Electron\u5e94\u7528\u7a0b\u5e8f\u533a\u5206\u4e3b\u8fdb\u7a0b\u548c\u6e32\u67d3\u8fdb\u7a0b\u3002"),(0,l.kt)("h4",{id:"\u4e3b\u8fdb\u7a0b"},"\u4e3b\u8fdb\u7a0b"),(0,l.kt)("p",null,"\u4e4b\u524d\u6211\u4eec\u521b\u5efa\u7684\u5f15\u7528\u4e2d\uff0celectron.js\u4e2d\u7684\u4ee3\u7801\uff0c\u5c31\u662f\u8fd0\u884c\u5728Electron\u7684\u4e3b\u8fdb\u7a0b\u4e2d\uff0c\u4e3b\u8fdb\u7a0b\u8d1f\u8d23\u521b\u5efa\u4e3b\u7a97\u53e3\u5e76\u4e14\u52a0\u8f7dUI\uff0c\u4e5f\u5c31\u662findex.html\u3002"),(0,l.kt)("p",null,"\u4e3b\u8fdb\u7a0b\u8d1f\u8d23\u76d1\u542c\u5e94\u7528\u7a0b\u5e8f\u7684\u751f\u547d\u5468\u671f\u4e8b\u4ef6\u3001\u542f\u52a8\u7b2c\u4e00\u4e2a\u7a97\u53e3\u3001\u52a0\u8f7dUI\u9875\u9762\u3001\u5e94\u7528\u7a0b\u5e8f\u5173\u95ed\u540e\u56de\u6536\u8d44\u6e90\uff0c\u9000\u51fa\u7a0b\u5e8f\u8fd9\u4e9b\u4efb\u52a1\u3002"),(0,l.kt)("h4",{id:"\u6e32\u67d3\u8fdb\u7a0b"},"\u6e32\u67d3\u8fdb\u7a0b"),(0,l.kt)("p",null,"\u6e32\u67d3\u8fdb\u7a0b\u8d1f\u8d23\u5b8c\u6210\u6e32\u67d3\u9875\u9762\u3001\u63a5\u6536\u7528\u6237\u8f93\u5165\u3001\u54cd\u5e94\u7528\u6237\u7684\u4ea4\u4e92\u8fd9\u4e9b\u4efb\u52a1\u3002UI\u90e8\u5206\u7684\u4ee3\u7801\u5219\u662f\u8fd0\u884c\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d"),(0,l.kt)("p",null,"\u5728electron.js\u4ee3\u7801\u4e2d\uff0c\u76d1\u542c\u5e94\u7528\u7a0b\u5e8f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u76d1\u542c\u5e94\u7528\u7a0b\u5e8f\napp.whenReady().then(createWindow);\n")),(0,l.kt)("p",null,"\u5173\u95ed\u5e94\u7528\u5e76\u4e14\u9000\u51fa\u7a0b\u5e8f\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"// \u5173\u95ed\u7a0b\u5e8f\napp.on(\"window-all-closed\", function () {\n    if (process.platform !== 'darwin') {\n        app.quit();\n    }\n})\n")),(0,l.kt)("p",null,"Electron\u5e94\u7528\u53ea\u6709\u4e00\u4e2a\u4e3b\u8fdb\u7a0b\uff0c\u53ef\u4ee5\u6709\u591a\u4e2a\u6e32\u67d3\u8fdb\u7a0b\uff0c\u4e00\u4e2aBrowserWindow\u5b9e\u4f8b\u8868\u793a\u4e00\u4e2a\u6e32\u67d3\u8fdb\u7a0b\uff0c\u5728BrowserWindow\u5b9e\u4f8b\u9500\u6bc1\u540e\uff0c\u6e32\u67d3\u8fdb\u7a0b\u4e5f\u5c31\u7ed3\u675f\u4e86\u3002"),(0,l.kt)("p",null,"Electron\u7684\u4e3b\u8fdb\u7a0b\u6a21\u5757\uff1aapp\u3001autoUpdater\u3001BrowserView\u3001BrowserWindow\u3001contentTracing\u3001dialog\u3001globalShortcut\u7b49\u7b49\uff1b"),(0,l.kt)("p",null,"Electron\u7684\u6e32\u67d3\u7a0b\u5e8f\u6a21\u5757\uff1aipcRenderer\u3001webFrame\u7b49\u3002"),(0,l.kt)("h2",{id:"\u8fdb\u7a0b\u901a\u4fe1"},"\u8fdb\u7a0b\u901a\u4fe1"),(0,l.kt)("p",null,"\u5982\u679c\u60f3\u8981\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u521b\u5efa\u7a97\u53e3\u3001\u521b\u5efa\u83dc\u5355\u8fd9\u4e9b\u64cd\u4f5c\uff0c\u5219\u53ef\u4ee5\u8ba9\u6e32\u67d3\u8fdb\u7a0b\u4e2a\u4e3b\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\uff0c\u7531\u4e3b\u8fdb\u7a0b\u6765\u5b8c\u6210\u5bf9\u5e94\u7684\u64cd\u4f5c\uff1b\u53e6\u5916\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6e32\u67d3\u8fdb\u7a0b\u7684remote\u6a21\u5757\u6765\u5b8c\u6210\u54cd\u5e94\u7684\u64cd\u4f5c\u3002"),(0,l.kt)("p",null,"\u6ce8\u610f\uff1aremote\u6a21\u5757\u5728\u6700\u65b0\u7248\u672c\u4e2d\u53ef\u80fd\u88ab\u9057\u5f03\u4e86\uff0c\u5728\u5f00\u53d1\u65f6\u5019\u7559\u610f\u4e00\u4e0b\u81ea\u5df1\u4f7f\u7528Electron\u7684\u7248\u672c\u3002"),(0,l.kt)("h4",{id:"\u6e32\u67d3\u8fdb\u7a0b\u8bbf\u95ee\u4e3b\u8fdb\u7a0b"},"\u6e32\u67d3\u8fdb\u7a0b\u8bbf\u95ee\u4e3b\u8fdb\u7a0b"),(0,l.kt)("p",null,"\u5728\u8fd9\u91cc\u6211\u4eec\u662f\u5728react\u4ee3\u7801\u4e2d\u6765\u8bbf\u95ee\u4e3b\u8fdb\u7a0b\u7684\uff0c\u9996\u5148\u8bbe\u7f6econtextIsolation\u5c5e\u6027\uff0c\u8fd9\u91cc\u4f7f\u7528\u7684electron\u7248\u672c\u5df2\u7ecf\u9ed8\u8ba4contextIsolation\u5c5e\u6027\u503c\u4e3atrue\u3002contextIsolation\u662f\u4e0a\u4e0b\u6587\u9694\u79bb"),(0,l.kt)("blockquote",null,(0,l.kt)("p",{parentName:"blockquote"},"\u4e0a\u4e0b\u6587\u9694\u79bb\u662f Electron \u4e2d\u7684\u4e00\u9879\u5b89\u5168\u63aa\u65bd\uff0c\u53ef\u786e\u4fdd \u9884\u52a0\u8f7d\u811a\u672c\u4e0d\u4f1a\u5c06\u62e5\u6709\u4f18\u5148\u6743\u7684 Electron \u6216 Node.js API \u6cc4\u6f0f\u5230 Web \u6e32\u67d3\u5668\u8fdb\u7a0b\u4e2d\u7684\u5185\u5bb9\u3002")),(0,l.kt)("p",null,"\u5728\u8fd9\u91cc\u6211\u4eec\u5148\u5c06contextIsolation\u8bbe\u7f6e\u4e3afalse\uff0c\u786e\u4fdd\u80fd\u591f\u5728react\u7ec4\u4ef6\u4e2d\u4f7f\u7528Electron\u6a21\u5757\u3002\u8bbe\u7f6e\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"    const mainWindow = new BrowserWindow({\n        width: 1000,\n        height: 500,\n        webPreferences: {\n            nodeIntegration: true,\n            contextIsolation: false\n        },\n        icon: getAssetPath('logo.png')\n    });\n")),(0,l.kt)("p",null,"\u73b0\u5728\u5728react\u7ec4\u4ef6\u4e2d\u5f15\u5165Electron\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'import { useEffect } from "react";\nimport { Button } from "antd";\nimport logo from \'./logo.svg\';\nimport \'./App.css\';\nconst { ipcRenderer } = window.require("electron");\nfunction App() {\n  useEffect(() => {\n  }, [])\n\n  const send = () => {\n    ipcRenderer.send("msg12","\u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u6d88\u606f\u4e86")\n  }\n  return (\n    <div className="App">\n      <header className="App-header">\n        <img src={logo} className="App-logo" alt="logo" />\n        <h2>\u6b22\u8fce\u6765\u5230\u8bfb\u5fc3\u60a6\u7684\u4e16\u754c!\u6211\u9519\u4e86</h2>\n        <Button type="primary" onClick={send}>\u53d1\u9001</Button>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n')),(0,l.kt)("p",null,"\u5728\u6e32\u67d3\u8fdb\u7a0b\u901a\u8fc7\u4f7f\u7528window.require\u4ee3\u66ffrequire\u6765\u5f15\u5165electron\uff0c\u56e0\u4e3a\u524d\u8005\u4e0d\u4f1a\u88abwebpack\u7f16\u8bd1\uff0c\u5728\u6e32\u67d3\u8fdb\u7a0brequire\u5173\u952e\u5b57\u5c31\u662f\u8868\u793anode\u6a21\u5757\u7684\u7cfb\u7edf\u3002"),(0,l.kt)("p",null,"\u6e32\u67d3\u8fdb\u7a0b\u9700\u8981\u4f7f\u7528ipcRenderer\u6a21\u5757\u6765\u5411\u4e3b\u8fdb\u7a0b\u53d1\u9001\u4fe1\u606f\uff1a\nipcRenderer.send()\u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\u662f\u8bbe\u7f6e\u4fe1\u606f\u901a\u9053\u7684\u540d\u79f0\uff0c\u540e\u9762\u53c2\u6570\u5c31\u662f\u6e32\u67d3\u8fdb\u7a0b\u8981\u4f20\u9012\u7684\u4fe1\u606f\u5185\u5bb9\uff0c\u4e3b\u8fdb\u7a0b\u4f1a\u6839\u636e\u901a\u9053\u540d\u79f0\u6765\u63a5\u6536\u4fe1\u606f\u3002"),(0,l.kt)("p",null,"\u7ec4\u4ef6App\u7684\u6548\u679c\u5982\u4e0b\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/a6fba45086c949dca30c61883bcd1fe0.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"})),(0,l.kt)("p",null,"\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u901a\u8fc7ipcMain\u6765\u63a5\u6536\u6e32\u67d3\u8fdb\u7a0b\u53d1\u51fa\u7684\u4fe1\u606f\uff0c\u73b0\u5728\u5728electron.js\u4e2d\u7f16\u5199\u63a5\u6536\u4fe1\u606f\u7684\u903b\u8f91\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"ipcMain.on('msg12', (event, title) => {\n    const webContents = event.sender\n    const win = BrowserWindow.fromWebContents(webContents)\n    win.setTitle(title);\n    const msgTemplate = (pingPong) => `IPC test:${pingPong}`;\n    console.log(msgTemplate(title));\n})\n")),(0,l.kt)("p",null,"\u5f53\u6211\u4eec\u70b9\u51fb\u53d1\u9001\u6309\u94ae\u7684\u65f6\u5019\uff0c\u5728\u7ec8\u7aef\u4e2d\u5c31\u53ef\u4ee5\u770b\u5230\u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u7684\u4fe1\u606f\u4e86\uff0c\u6548\u679c\u5982\u56fe\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/5c7c46319af9411a8d709bb1136cd0ed.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"})),(0,l.kt)("p",null,"\u5728\u4e0a\u9762\u7684\u4ee3\u7801\u4e2d\uff0c\u6211\u5c06\u6e32\u67d3\u8fdb\u7a0b\u8fdb\u7a0b\u53d1\u9001\u7684\u4fe1\u606f\uff0c\u76f4\u63a5\u66f4\u65b0\u5230\u7a97\u53e3\u7684\u6807\u9898\u4e86\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/a24cbe2e08354f9ebd4a52b97c7661d5.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"})),(0,l.kt)("p",null,"\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\u5b8c\u5168\u9075\u5b88electron\u7684\u5b89\u5168\u914d\u7f6e\uff0c\u7981\u6b62\u5728\u6e32\u67d3\u8fdb\u7a0b\u8bbf\u95eeElectron\u7684API\uff0c\u4e5f\u5c31\u662f\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6e32\u67d3\u8fdb\u7a0b\u6ca1\u6709\u6743\u9650\u8bbf\u95eeNode\u548cELectron\u6a21\u5757\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7contextBridge API\u6765\u9009\u62e9\u4ece\u9884\u52a0\u8f7d\u811a\u672c\u4e2d\u66b4\u9732\u5bf9\u5e94\u7684API\uff0c\u8fd9\u662f\u9884\u52a0\u8f7d\u811a\u672c\u4ee3\u7801preload.js\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const { contextBridge, ipcRenderer } = require('electron')\n\ncontextBridge.exposeInMainWorld('electronAPI', {\n    setTitle: (title) => ipcRenderer.send('msg12', title)\n})\n")),(0,l.kt)("p",null,"\u5411\u6e32\u67d3\u8fdb\u7a0b\u66b4\u9732\u4e00\u4e2a\u5168\u5c40\u7684\u53d8\u91cf\uff0c\u5728\u6e32\u67d3\u8fdb\u7a0b\u4e2d\uff0c\u901a\u8fc7window\u5168\u5c40\u53d8\u91cf\u4e2d\u627e\u5230\u5bf9\u5e94\u7684API\u8fdb\u884c\u8c03\u7528\uff0c"),(0,l.kt)("p",null,"\u5728\u4e3b\u8fdb\u7a0b\u4e2d\u8bbe\u7f6e\u9884\u52a0\u8f7d\u6587\u4ef6\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"    const mainWindow = new BrowserWindow({\n        width: 1000,\n        height: 500,\n        webPreferences: {\n            // nodeIntegration: true,\n            // contextIsolation: false,\n            preload: getAssetPath('preload.js'),\n        },\n        icon: getAssetPath('logo.png')\n    });\n")),(0,l.kt)("p",null,"\u518d\u4fee\u6539\u4e00\u4e0bApp\u7ec4\u4ef6\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'import { Button } from "antd";\nimport logo from \'./logo.svg\';\nimport \'./App.css\';\nfunction App() {\n  const send = () => {\n    window.electronAPI.setTitle("\u6d4b\u8bd5\u6807\u9898")\n  }\n  return (\n    <div className="App">\n      <header className="App-header">\n        <img src={logo} className="App-logo" alt="logo" />\n        <h2>\u6b22\u8fce\u6765\u5230\u8bfb\u5fc3\u60a6\u7684\u4e16\u754c!\u6211\u9519\u4e86</h2>\n        <Button type="primary" onClick={send}>\u53d1\u9001</Button>\n      </header>\n    </div>\n  );\n}\n\nexport default App;\n')),(0,l.kt)("p",null,"\u6548\u679c\u5982\u56fe\uff1a"),(0,l.kt)("p",null,(0,l.kt)("img",{parentName:"p",src:"https://img-blog.csdnimg.cn/4bca128307ea435a962a00344c288290.png",alt:"\u5728\u8fd9\u91cc\u63d2\u5165\u56fe\u7247\u63cf\u8ff0"})),(0,l.kt)("p",null,"\u5982\u679creact\u5e94\u7528\u914d\u5408Typescript\u6765\u5f00\u53d1\u7684\u8bdd\uff0c\u53ef\u80fd\u4f1a\u63d0\u793awindow\u4e0a\u4e0d\u5b58\u5728electronAPI\u5c5e\u6027\u3002\u8fd9\u662f\u5e94\u8be5\u600e\u4e48\u89e3\u51b3\u5462\uff1f"),(0,l.kt)("p",null,"\u5728react\u5e94\u7528\u76ee\u5f55\u4e2d\u7684src\u76ee\u5f55\u4e0b\u521b\u5efatypes\u6587\u4ef6\u5939\uff0c\u521b\u5efa\u4e00\u4e2a.d.ts\u6587\u4ef6\uff0c\u6bd4\u5982index.d.ts\uff0c\u4ee3\u7801\u5982\u4e0b\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"interface Window {\n  [propName: string]: any;\n}\n\n")),(0,l.kt)("p",null,"\u8fd9\u6837window\u5c31\u53ef\u4ee5\u987a\u5229\u6302\u8f7d\u5c5e\u6027\u4e86\u3002"),(0,l.kt)("h4",{id:"\u4e3b\u8fdb\u7a0b\u8bbf\u95ee\u6e32\u67d3\u8fdb\u7a0b"},"\u4e3b\u8fdb\u7a0b\u8bbf\u95ee\u6e32\u67d3\u8fdb\u7a0b"),(0,l.kt)("p",null,"\u5728\u9884\u52a0\u8f7dpreload.js\u4e2d\u66b4\u9732\u5bf9\u5e94\u7684API\uff0c\u4f8b\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"const { contextBridge, ipcRenderer } = require('electron')\n\ncontextBridge.exposeInMainWorld('electronAPI', {\n    setTitle: (title) => ipcRenderer.send('msg12', title),\n    getMainMsg: (callback) => ipcRenderer.on('resMsg', (event, param) => {\n        callback(param);\n        console.log(\"event\", event)\n    })\n})\n")),(0,l.kt)("p",null,"\u6e32\u67d3\u8fdb\u7a0b\u4e2d\u901a\u8fc7ipcRenderer.on\u6765\u76d1\u542c\u5bf9\u5e94\u7684\u4fe1\u606f\u901a\u9053\u3002"),(0,l.kt)("p",null,"\u4e3b\u8fdb\u7a0b\u5411\u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u4fe1\u606f\uff0c\u5219\u901a\u8fc7webContents\u6a21\u5757\uff0c\u6bd4\u5982\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},"    ipcMain.on('msg12', (event, title) => {\n        const webContents = event.sender\n        const win = BrowserWindow.fromWebContents(webContents)\n        win.setTitle(title);\n        const msgTemplate = (pingPong) => `IPC test:${pingPong}`;\n        console.log(msgTemplate(title));\n        mainWindow.webContents.send(\"resMsg\", title)\n    });\n")),(0,l.kt)("p",null,"\u8fd9\u91cc\u662f\u5c06\u6e32\u67d3\u8fdb\u7a0b\u53d1\u9001\u7684\u4fe1\u606f\u8fd4\u8fd8\u7ed9\u6e32\u67d3\u8fdb\u7a0b\u3002App\u7ec4\u4ef6\u6dfb\u52a0\u4ee3\u7801\uff1a"),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-javascript"},'    window.electronAPI.getMainMsg((res: any) => {\n      console.log("\u4e3b\u8fdb\u7a0b", res)\n    });\n')),(0,l.kt)("p",null,"\u8fd9\u6837\u5c31\u53ef\u4ee5\u83b7\u53d6\u5230\u4e3b\u8fdb\u7a0b\u53d1\u9001\u7684\u4fe1\u606f\u4e86\u3002"))}u.isMDXComponent=!0}}]);